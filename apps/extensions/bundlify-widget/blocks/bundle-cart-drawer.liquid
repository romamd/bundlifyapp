<style>
  #bundlify-cart-drawer {
    --bundlify-accent: {{ block.settings.primary_color }};
    --bundlify-accent-hover: {{ block.settings.primary_color_hover }};
    --bundlify-text-primary: {{ block.settings.text_color }};
    --bundlify-card-bg: {{ block.settings.card_background }};
    --bundlify-badge-bg: {{ block.settings.badge_background }};
    --bundlify-badge-text: {{ block.settings.badge_text_color }};
    --bundlify-radius: {{ block.settings.border_radius }}px;
  }
</style>

<div id="bundlify-cart-drawer"
     data-shop="{{ shop.permanent_domain }}"
     data-enabled="{{ block.settings.enabled }}"
     data-upsell-heading="{{ block.settings.upsell_heading }}"
     data-show-shipping-progress="{{ block.settings.show_shipping_progress }}"
     data-button-text="{{ block.settings.button_text }}"
     data-show-savings="{{ block.settings.show_savings }}"
     style="display:none;">
</div>

{% schema %}
{
  "name": "Bundlify Cart Drawer",
  "target": "body",
  "javascript": "bundlify.js",
  "stylesheet": "bundlify.css",
  "settings": [
    {
      "type": "checkbox",
      "id": "enabled",
      "label": "Enable cart drawer",
      "default": false
    },
    {
      "type": "text",
      "id": "upsell_heading",
      "label": "Upsell heading",
      "default": "Complete your order"
    },
    {
      "type": "checkbox",
      "id": "show_shipping_progress",
      "label": "Show free shipping progress bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_savings",
      "label": "Show savings badge",
      "default": true
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Primary color",
      "default": "#2563eb"
    },
    {
      "type": "color",
      "id": "primary_color_hover",
      "label": "Primary hover color",
      "default": "#1d4ed8"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#111827"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "badge_background",
      "label": "Badge background",
      "default": "#dcfce7"
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Badge text color",
      "default": "#166534"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "default": 10,
      "min": 0,
      "max": 24,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Upsell button text",
      "default": "Add Bundle to Cart"
    }
  ]
}
{% endschema %}
